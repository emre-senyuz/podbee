@model CommentDetailModel
@{
    ViewBag.Title = LanguageHelper.GetValue("AdminCommentDetail");
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}
<div class="kt-subheader kt-grid__item" id="kt_subheader">
    <div class="kt-subheader__main">
        <h3 class="kt-subheader__title">
            @LanguageHelper.GetValue("AdminCommentDetail")
        </h3>
        <span class="kt-subheader__separator kt-hidden"></span>
        <div class="kt-subheader__breadcrumbs">
            <a href="/dashboard" class="kt-subheader__breadcrumbs-home"><i class="flaticon2-shelter"></i></a>
            <span class="kt-subheader__breadcrumbs-separator"></span>
            <a href="/comments" class="kt-subheader__breadcrumbs-link">
                @LanguageHelper.GetValue("AdminComments")
            </a>
            <span class="kt-subheader__breadcrumbs-separator"></span>
            <span class="kt-subheader__breadcrumbs-link">
                @LanguageHelper.GetValue("AdminEdit")
            </span>
        </div>
    </div>
    <div class="kt-subheader__toolbar">
        <div class="d-flex kt-subheader__wrapper">
            <a href="/comments" class="btn btn-clean btn-bold btn-sm btn-icon-h kt-margin-l-10">
                <i class="la la-long-arrow-left"></i> @LanguageHelper.GetValue("AdminBack")
            </a>
        </div>
    </div>
</div>
<div class="kt-content  kt-grid__item kt-grid__item--fluid" id="kt_content">
    <div class="kt-portlet">
        <div class="kt-portlet__head">
            <div class="kt-portlet__head-label">
                <h3 class="kt-portlet__head-title">
                    @LanguageHelper.GetValue("AdminCommentDetail")
                </h3>
            </div>
        </div>
        <div class="kt-portlet__body">
            <div class="kt-section">
                <div class="kt-section__content">
                    <table class="table table-striped mb-0">
                        <tbody>
                            <tr>
                                <th scope="row">@LanguageHelper.GetValue("FormMember")</th>
                                <td>@Html.Raw(Model.User.Name + " " + Model.User.Surname)</td>
                            </tr>
                            <tr>
                                <th scope="row">@LanguageHelper.GetValue("PagePostTitle")</th>
                                <td>
                                    @Model.Post.Title
                                    <a href="@Model.Post.Url" target="_blank" class="ml-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect id="bound" x="0" y="0" width="24" height="24" />
                                                <path d="M12.4644661,14.5355339 L9.46446609,14.5355339 C8.91218134,14.5355339 8.46446609,14.9832492 8.46446609,15.5355339 C8.46446609,16.0878187 8.91218134,16.5355339 9.46446609,16.5355339 L12.4644661,16.5355339 L12.4644661,17.5355339 C12.4644661,18.6401034 11.5690356,19.5355339 10.4644661,19.5355339 L6.46446609,19.5355339 C5.35989659,19.5355339 4.46446609,18.6401034 4.46446609,17.5355339 L4.46446609,13.5355339 C4.46446609,12.4309644 5.35989659,11.5355339 6.46446609,11.5355339 L10.4644661,11.5355339 C11.5690356,11.5355339 12.4644661,12.4309644 12.4644661,13.5355339 L12.4644661,14.5355339 Z" id="Combined-Shape" fill="#000000" opacity="0.3" transform="translate(8.464466, 15.535534) rotate(-45.000000) translate(-8.464466, -15.535534) " />
                                                <path d="M11.5355339,9.46446609 L14.5355339,9.46446609 C15.0878187,9.46446609 15.5355339,9.01675084 15.5355339,8.46446609 C15.5355339,7.91218134 15.0878187,7.46446609 14.5355339,7.46446609 L11.5355339,7.46446609 L11.5355339,6.46446609 C11.5355339,5.35989659 12.4309644,4.46446609 13.5355339,4.46446609 L17.5355339,4.46446609 C18.6401034,4.46446609 19.5355339,5.35989659 19.5355339,6.46446609 L19.5355339,10.4644661 C19.5355339,11.5690356 18.6401034,12.4644661 17.5355339,12.4644661 L13.5355339,12.4644661 C12.4309644,12.4644661 11.5355339,11.5690356 11.5355339,10.4644661 L11.5355339,9.46446609 Z" id="Combined-Shape-Copy" fill="#000000" transform="translate(15.535534, 8.464466) rotate(-45.000000) translate(-15.535534, -8.464466) " />
                                            </g>
                                        </svg>
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">@LanguageHelper.GetValue("FormComment")</th>
                                <td>@Model.Comment.Comment</td>
                            </tr>
                            <tr>
                                <th scope="row">@LanguageHelper.GetValue("FormLike") / @LanguageHelper.GetValue("FormDislike")</th>
                                <td>@Model.Comment.LikeCount / @Model.Comment.DislikeCount</td>
                            </tr>
                            <tr>
                                <th scope="row">@LanguageHelper.GetValue("FormDate")</th>
                                <td>@Model.Comment.CreateDate</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="form-group row mb-0">
                <label class="col-3 col-form-label" for="Status">
                    @LanguageHelper.GetValue("FormStatus")
                </label>
                <div class="col-3">
                    <span class="kt-switch">
                        <label>
                            @Html.CheckBox("Status", Model.Comment.Status, new { @data_js = "update-column", @data_column = "Status", @data_value = Model.Comment.Status.ToString().ToLower(), @data_id = Model.Comment.ID })
                            <span></span>
                        </label>
                    </span>
                </div>
            </div>
            <div class="form-group row mb-0">
                <label class="col-3 col-form-label" for="Status">
                    @LanguageHelper.GetValue("FormConfirmationStatus")
                </label>
                <div class="col-3">
                    <span class="kt-switch">
                        <label>
                            @Html.CheckBox("IsConfirmed", Model.Comment.IsConfirmed, new { @data_js = "update-column", @data_column = "IsConfirmed", @data_value = Model.Comment.IsConfirmed.ToString().ToLower(), @data_id = Model.Comment.ID })
                            <span></span>
                        </label>
                    </span>
                </div>
            </div>
        </div>
        <div class="kt-portlet__foot">
            <div class="kt-form__actions">
                <button type="button" class="btn btn-danger" data-js="delete-record" data-id="@Model.Comment.ID">@LanguageHelper.GetValue("ButtonDelete")</button>
            </div>
        </div>
    </div>
    @if (Model.Comment.ParentID == 0)
    {
        <div class="kt-portlet@(Model.Answers == null || Model.Answers.Count == 0 ? " mb-0" : "")">
            <div class="kt-portlet__head">
                <div class="kt-portlet__head-label">
                    <h3 class="kt-portlet__head-title">
                        @LanguageHelper.GetValue("Answer")
                    </h3>
                </div>
            </div>
            <form action="/comment" class="kt-form mb-0" data-js="comment">
                @Html.AntiForgeryToken()
                @Html.Hidden("PostID", Model.Post.ID)
                @Html.Hidden("Type", Model.Comment.Type)
                @Html.Hidden("ParentID", Model.Comment.ID)
                <div class="kt-portlet__body">
                    <div class="w-100" data-js="comment-message"></div>
                    <div class="form-group mb-0">
                        <textarea class="form-control" id="Comment" name="Comment" placeholder="@LanguageHelper.GetValue("FormComment")"></textarea>
                    </div>
                </div>
                @Html.Hidden("Email", User.Identity.Name)
                @Html.Hidden("CreateDate", DateTime.Now)
                @Html.Hidden("SystemSide", true)
                <div class="kt-portlet__foot">
                    <div class="kt-form__actions">
                        <button type="button" class="btn btn-success" data-js="send-comment">@LanguageHelper.GetValue("ButtonSend")</button>
                    </div>
                </div>
            </form>
        </div>
        if (Model.Answers != null && Model.Answers.Count > 0)
        {
            <div class="kt-portlet mb-0">
                <div class="kt-portlet__head">
                    <div class="kt-portlet__head-label">
                        <h3 class="kt-portlet__head-title">
                            @LanguageHelper.GetValue("Answer")
                        </h3>
                    </div>
                </div>
                <div class="kt-portlet__body kt-portlet__body--fit">
                    <div class="kt-datatable" id="comment-answers" data-parent="@Model.Comment.ID"></div>
                </div>
            </div>
        }
    }
</div>
@section scripts{
    <script defer src="@Url.Content("~/Scripts/views/Admin/Comment.js")"></script>
    <script defer src="@Url.Content("~/Scripts/views/Layout/Layout.js")"></script>
}